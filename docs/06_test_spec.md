# VDOT Calculator - テスト仕様書

## 1. テスト方針

### 1.1 テストレベル

| レベル | 対象 | 手法 |
|-------|------|------|
| 単体テスト | 計算ロジック | 手動 / Console |
| 結合テスト | UI + ロジック | ブラウザテスト |
| E2E テスト | 全体フロー | ブラウザ操作 |
| 非機能テスト | パフォーマンス / PWA | Lighthouse |

---

## 2. 単体テスト

### 2.1 VDOT 計算テスト

#### TC-001: 標準的な入力
| 項目 | 内容 |
|-----|------|
| 入力 | ペース 5:00/km, 距離 10km |
| 期待結果 | VDOT ≈ 40 |
| 検証方法 | `calculateVDOT(10000, 50)` |

#### TC-002: 高速ペース
| 項目 | 内容 |
|-----|------|
| 入力 | ペース 3:00/km, 距離 10km |
| 期待結果 | VDOT > 60 |
| 検証方法 | `calculateVDOT(10000, 30)` |

#### TC-003: 低速ペース
| 項目 | 内容 |
|-----|------|
| 入力 | ペース 8:00/km, 距離 5km |
| 期待結果 | VDOT < 30 |
| 検証方法 | `calculateVDOT(5000, 40)` |

### 2.2 レースタイム予測テスト

#### TC-004: マラソン予測
| 項目 | 内容 |
|-----|------|
| 入力 | VDOT = 40 |
| 期待結果 | マラソン ≈ 3:49:xx |
| 検証方法 | `predictRaceTime(40, 42195)` |

#### TC-005: 5K 予測
| 項目 | 内容 |
|-----|------|
| 入力 | VDOT = 50 |
| 期待結果 | 5K < 20:00 |
| 検証方法 | `predictRaceTime(50, 5000)` |

---

## 3. 結合テスト

### 3.1 入力→計算→表示フロー

#### TC-010: 正常系フロー
| ステップ | 操作 | 期待結果 |
|---------|------|---------|
| 1 | 分ドロップダウンで「5」選択 | 選択値が表示される |
| 2 | 秒ドロップダウンで「0」選択 | 選択値が表示される |
| 3 | 「10K」ボタンをクリック | 距離に「10」が入力される |
| 4 | 「予測する」をクリック | 結果が表示される |
| 5 | - | VDOT, マラソン, ハーフ, 10K, 5K が表示 |

### 3.2 バリデーションテスト

#### TC-011: ペース未入力
| ステップ | 操作 | 期待結果 |
|---------|------|---------|
| 1 | 距離のみ入力 | - |
| 2 | 「予測する」をクリック | エラーメッセージ表示 |

#### TC-012: 距離未入力
| ステップ | 操作 | 期待結果 |
|---------|------|---------|
| 1 | ペースのみ入力 | - |
| 2 | 「予測する」をクリック | エラーメッセージ表示 |

---

## 4. E2E テスト

### 4.1 ユーザーシナリオ

#### TC-020: 初回ユーザーフロー
1. アプリにアクセス
2. ペースを入力（5分30秒）
3. 距離プリセット「ハーフ」を選択
4. 予測ボタンをクリック
5. 結果を確認
6. **期待結果**: フルマラソン予測タイムが表示される

### 4.2 PWA テスト

#### TC-021: オフライン動作
1. アプリにアクセス（オンライン）
2. ネットワークをオフラインに切り替え
3. ページをリロード
4. **期待結果**: アプリが正常に表示される

#### TC-022: インストール
1. アプリにアクセス
2. ブラウザのインストールプロンプトを確認
3. インストールを実行
4. **期待結果**: ホーム画面にアイコンが追加される

---

## 5. 非機能テスト

### 5.1 パフォーマンステスト

| 項目 | 目標値 | 測定方法 |
|-----|-------|---------|
| FCP | < 1.8s | Lighthouse |
| LCP | < 2.5s | Lighthouse |
| TTI | < 3.8s | Lighthouse |
| CLS | < 0.1 | Lighthouse |

### 5.2 PWA 監査

| 項目 | 目標 | 測定方法 |
|-----|------|---------|
| Installable | Pass | Lighthouse PWA |
| PWA Optimized | Pass | Lighthouse PWA |

---

## 6. テスト環境

### 6.1 ブラウザ

| ブラウザ | バージョン |
|---------|----------|
| Chrome | 最新 |
| Safari | 最新 |
| Firefox | 最新 |
| Edge | 最新 |

### 6.2 デバイス

| デバイス | 解像度 |
|---------|-------|
| Desktop | 1920x1080 |
| Tablet | 768x1024 |
| Mobile | 375x667 |

---

## 7. テスト実行記録

| TC ID | 実行日 | 結果 | 担当者 | 備考 |
|-------|-------|------|-------|------|
| TC-001 | 2026-02-08 | PASS | Auto | 5:00/km × 10km = VDOT 40.0 |
| TC-010 | 2026-02-08 | PASS | Auto | 正常フロー確認 |
| TC-021 | - | TODO | - | PWA オフラインテスト |
